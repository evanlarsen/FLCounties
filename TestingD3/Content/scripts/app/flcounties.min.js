define(["require","exports"],function(n,t){function c(n){i=new L.map(n,{center:new L.latLng(27.8,-83.75),zoom:6,minZoom:6,maxZoom:9,maxBounds:new L.latLngBounds(new L.latLng(19.062118,-98.217773),new L.latLng(35.245619,-71.455078))});var t=new L.tileLayer("http://{s}.tile.cloudmade.com/{key}/{styleId}/256/{z}/{x}/{y}.png",{key:"cb9913802a4a4f22a59d13a2fbd73d70",styleId:"22677",minZoom:6,maxZoom:9});i.addLayer(t),r=d3.select(i.getPanes().overlayPane).append("svg"),u=r.append("g").attr("class","leaflet-zoom-hide").attr("id","counties"),l(),h.then(y)}function l(){f=new L.control,f.onAdd=function(){return e=L.DomUtil.create("div","info"),o(),e},f.addTo(i)}function o(n){e.innerHTML="<h4>Florida Counties<\/h4>"+(n?"<b>"+n.name+"<\/b><br />("+n.county+")":"Hover over a state")}function a(n){o(n.properties)}function v(){o()}function y(n){function e(){var n=s(f[0]),t=s(f[1]);r.attr("width",t[0]-n[0]).attr("height",n[1]-t[1]).style("margin-left",n[0]+"px").style("margin-top",t[1]+"px"),u.attr("transform","translate("+-n[0]+","+-t[1]+")"),h.attr("d",o)}var t=topojson.object(n,n.objects.FLCounties),f=d3.geo.bounds(t),o=d3.geo.path().projection(s),h=u.selectAll("path").data(t.geometries).enter().append("path").on("mouseover",a).on("mouseout",v);i.on("viewreset",e);e()}function s(n){var t=i.latLngToLayerPoint(new L.LatLng(n[1],n[0]));return[t.x,t.y]}var i,r,u,f,e,h=$.getJSON("/Content/FLCounties.topo.js");t.isLoading=ko.observable(!0),t.viewAttached=c})